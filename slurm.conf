#
# slurm.conf file generated by configurator.html.
#
# See the slurm.conf man page for more information.
#
ClusterName=Slurm			#集群名称
ControlMachine=master #主控制节器的主机名，根据实际情况进行修改主机名
#ControlAddr=
#BackupController=		#备用控制器的主机名
#BackupAddr=
#
SlurmUser=slurm		#slurm运行用户
#SlurmdUser=root
SlurmctldPort=6817	#slurmctld监听端口
SlurmdPort=6818		#slurmd通信端口
AuthType=auth/munge	#内部认证类型
# AuthAltTypes=auth/jwt	#启用slurmrestd的认证方式
# AuthAltParameters=jwt_key=/etc/slurm/jwt_hs256.key	#jwt使用的密钥

#JobCredentialPrivateKey=
#JobCredentialPublicCertificate=
StateSaveLocation=/var/spool/slurm/ctld	#集群状态文件缓存目录
SlurmdSpoolDir=/var/spool/slurm/d		#计算代理缓存目录
SwitchType=switch/none
MpiDefault=none
SlurmctldPidFile=/var/run/slurmctld.pid
SlurmdPidFile=/var/run/slurmd.pid
ProctrackType=proctrack/linuxproc
#PluginDir=
#FirstJobId=
ReturnToService=0	#节点重启状态，默认0；建议2，重启后自动恢复成idle状态
#MaxJobCount=
#PlugStackConfig=
#PropagatePrioProcess=
#PropagateResourceLimits=
#PropagateResourceLimitsExcept=
#Prolog=
#Epilog=
#SrunProlog=
#SrunEpilog=
#TaskProlog=
#TaskEpilog=
#TaskPlugin=
#TrackWCKey=no
#TreeWidth=50
#TmpFS=
#UsePAM=
#
# TIMERS
SlurmctldTimeout=300 #slurmctld超时时间
SlurmdTimeout=300 #slurmd响应时间
InactiveLimit=0
MinJobAge=300 #完成作业保留时间
KillWait=30
Waittime=0
#
# SCHEDULING
SchedulerType=sched/backfill #启用回填
#SchedulerAuth=
SelectType=select/cons_tres 	#资源选择算法
SelectTypeParameters=CR_Core 	#基于Core调度
JobRequeue=1 	#允许重新排队
PriorityType=priority/multifactor 	#优先级策略
PriorityDecayHalfLife=14-0 	#半衰期时长
#PriorityUsageResetPeriod=14-0
PriorityWeightFairshare=100000	#FS权重
PriorityWeightAge=1000	
PriorityWeightPartition=10000	#队列权重
PriorityWeightJobSize=1000
PriorityMaxAge=1-0
#
# LOGGING
SlurmctldDebug=info
SlurmctldLogFile=/var/log/slurmctld.log
SlurmdDebug=info
SlurmdLogFile=/var/log/slurmd.log
#JobCompType=jobcomp/none
JobCompHost= master                #安装mysql的hostname，根据实际情况进行修改
JobCompLoc=/var/log/slurm/slurm_jobcomp.log    #日志信息
JobCompPass=123456                             #密码
JobCompPort=3306                               #mysql端口
JobCompType=jobcomp/mysql                      #使用mysql记录完成的任务信息
JobCompUser=root 

#JobCompLoc=
#
# ACCOUNTING
JobAcctGatherType=jobacct_gather/linux #启用linux插件
JobAcctGatherFrequency=30 	#作业采集间隔
#
AccountingStorageType=accounting_storage/slurmdbd 	#启用slurmdbd
AccountingStorageHost=master #根据实际情况进行修改
AccountingStoragePort=7031 	#记账服务端口
#AccountingStorageLoc=
#AccountingStoragePass=
#AccountingStorageUser=
#
# COMPUTE NODES 根据实际情况进行修改
NodeName=master,node1 Procs=1 State=UNKNOWN
PartitionName=debug Nodes=node1 Default=YES MaxTime=INFINITE State=UP
PartitionName=control Nodes=master Default=NO PriorityTier=10 MaxTime=INFINITE State=UP
# PartitionName=gpu Nodes=ccnl2022 Default=NO MaxTime=INFINITE State=UP
# GresTypes=gpu 	#通用资源类型
# NodeName=ccnl2022 Gres=gpu:1 RealMemory=64059 CoresPerSocket=12  State=UNKNOWN